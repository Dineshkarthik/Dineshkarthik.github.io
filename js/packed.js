var profile=function(t){var e=null,a=d31.time.format("%B %Y"),r=d31.time.format("%Y-%m-%d").parse,n=null,i=t,l=null,o=null,s=function(t,e){c(e.experience),c(e.study),l.domain([d31.min([d31.min(e.experience,function(t){return t.from}),d31.min(e.study,function(t){return t.from})]),d31.max([d31.max(e.experience,function(t){return t.pto}),d31.max(e.study,function(t){return t.pto})])]),d(e.experience),d(e.study);var a=n.append("g").attr("class","graph-container").attr("transform","translate("+[0,i.height-200]+")");a.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(o).selectAll("text").style("text-anchor","end").attr("transform","rotate(-60)"),a.append("text").classed("axis-label",!0).text("EXPERIENCE").style("text-anchor","center").attr("transform","translate("+[25,-55]+") rotate(-90)"),a.append("text").classed("axis-label",!0).text("EDUCATION").style("text-anchor","center").attr("transform","translate("+[25,130]+") rotate(-90)"),f(n,a,e.experience,"experience",-1,i.height/8,i.getItemFillCollor),f(n,a,e.study,"study",1,i.height/8,i.getItemFillCollor)},c=function(t){var e=0;t.forEach(function(t){t.id=e++,t.from=r(t.from),null==t.to?t.pto=new Date:(t.to=r(t.to),t.pto=t.to)})},d=function(t){t.forEach(function(t){t.diameter=l(t.pto)-l(t.from),null==t.to&&(t.diameter=2*t.diameter)}),t.sort(function(t,e){return e.diameter-t.diameter})},u=function(t,e,a,r,n){t.append("text").attr("font-size",e).style("font-weight",r).text(n).attr("transform",a)},f=function(t,r,n,o,s,c,d){var f=t.selectAll("g.info."+o).data(n).enter().append("g").attr("class",function(t){return o+t.id}).classed("info",!0).classed("default",function(t){return t.default_item}).classed(o,!0).attr("transform","translate("+[.1*i.width,c]+")").attr("fill-opacity",function(t){return t.default_item?1:0});u(f,"18px","translate("+[0,0]+")","bold",function(t){return t.type}),u(f,"18px","translate("+[0,25]+")","bold",function(t){return t.title}),u(f,"23px","translate("+[0,50]+")","bold",function(t){return t.institution}),u(f,"14px","translate("+[0,70]+")","normal",function(t){var e=a(t.from)+" - ";return null==t.to?e+="Now":e+=a(t.to),e});var h=f.selectAll("text.description").data(function(t,e){var a=70;return t.description.split("\n").map(function(t){return{text:t,position:a+=20}})}).enter();u(h,"14px",function(t){return"translate(0,"+t.position+")"},"normal",function(t){return t.text}),r.selectAll("path."+o).data(n).enter().append("path").classed(o,!0).classed("item",!0).attr("fill",function(t){return d(t)}).attr("fill-opacity",.6).attr("d",function(t){return function(t,e){var a=t/2;return"M0,0 q "+a+" "+e*(100+.7*a)+" "+t+" 0 z"}(t.diameter,s)}).attr("transform",function(t){return"translate("+[l(t.from),0]+")"}).on("mouseover",function(e){r.selectAll("path.item").transition().attr("stroke-width","1").attr("fill-opacity",.2),d31.select(this).transition().attr("stroke-width","2").attr("fill-opacity",1),m(t,o,e)}).on("mouseout",function(t){r.selectAll("path.item").transition().attr("stroke-width","2").attr("fill-opacity",.5),e=setTimeout(p,3e3)})},p=function(){n.selectAll("g.info").transition().attr("fill-opacity",0),n.selectAll("g.info.default").transition().attr("fill-opacity",1)},m=function(t,a,r){e&&(clearTimeout(e),e=null),t.selectAll("g.info").transition().attr("fill-opacity",0),t.selectAll("g.info."+a+"."+a+r.id).transition().attr("fill-opacity",1)};n=d31.select(i.wrapperSelector).append("svg").attr("width",i.width).attr("height",i.height),l=d31.time.scale().range([20,i.width-20]),d31.scale.linear().range([i.height,0]).domain([0,i.height]),o=d31.svg.axis().scale(l).orient("bottom").ticks(30).tickFormat(d31.time.format("%Y-%m")),d31.json(i.dataUrl,s)};function renderSkills(){var t=document.getElementById("bar").offsetWidth,e=d3.select("#bar").append("svg").attr("width",t).attr("height",980).attr("id","skills").attr("viewBox","0 0 "+t+" 980"),a=e.append("g").attr("transform","translate(20,0)"),r=["","Basic 1.0","Alright 2.0","Handy 3.0","Expert 4.0","Guru 5.0"],n=d3.scaleLinear().domain([0,5]).range([0,400]),i=d3.axisTop().scale(n).ticks(5).tickFormat(function(t){return r[t%6]}),l=d3.cluster().size([980,t-460]).separation(function(t,e){return t.parent==e.parent||t.parent.parent==e.parent||t.parent==e.parent.parent?.4:.8}),o=d3.stratify().parentId(function(t){return t.id.substring(0,t.id.lastIndexOf("."))});d3.csv("./data/skillsdata.csv",function(t){return{id:t.id,value:+t.value,color:t.color}},function(t,r){if(t)throw t;var s=o(r);l(s);a.selectAll(".link").data(s.descendants().slice(1)).enter().append("path").attr("class","link").attr("d",function(t){return"M"+t.y+","+t.x+"C"+(t.parent.y+100)+","+t.x+" "+(t.parent.y+100)+","+t.parent.x+" "+t.parent.y+","+t.parent.x});a.selectAll(".node").data(s.descendants()).enter().append("g").attr("class",function(t){return"node"+(t.children?" node--internal":" node--leaf")}).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).append("circle").attr("r",4);var c=a.selectAll(".node--leaf").append("g").attr("class","node--leaf-g").attr("transform","translate(8,-16)");c.append("rect").attr("class","shadow").style("fill",function(t){return t.data.color}).attr("width",2).attr("height",30).attr("rx",2).attr("ry",2).transition().duration(800).attr("width",function(t){return n(t.data.value)}),c.append("text").attr("dy",19.5).attr("x",8).style("text-anchor","start").text(function(t){return t.data.id.substring(t.data.id.lastIndexOf(".")+1)}),a.selectAll(".node--internal").append("text").attr("y",-10).style("text-anchor","middle").text(function(t){return t.data.id.substring(t.data.id.lastIndexOf(".")+1)});var d=a.select(".node--leaf");d.insert("g").attr("class","xAxis").attr("transform","translate(7,-14)").call(i),d.insert("g").attr("class","grid").attr("transform","translate(7,965)").call(d3.axisBottom().scale(n).ticks(5).tickSize(-980,0,0).tickFormat("")),e.selectAll(".grid").select("line").style("stroke-dasharray","20,1").style("stroke","black");var u=e.insert("g").attr("class","ballG").attr("transform","translate(1100,490)");u.insert("circle").attr("class","shadow").style("fill","steelblue").attr("r",5),u.insert("text").style("text-anchor","middle").attr("dy",5).text("0.0"),d3.selectAll(".node--leaf-g").on("mouseover",function(t){d3.select(this).select("rect").attr("stroke","#4D4D4D").attr("stroke-width","2");var e=u.transition().duration(400).attr("transform","translate("+(t.y+n(t.data.value)+90)+","+(t.x+1.5)+")");e.select("circle").style("fill",t.data.color).attr("r",18),e.select("text").delay(300).text(Number(t.data.value).toFixed(1))}).on("mouseout",function(){d3.select(this).select("rect").attr("stroke-width","0")})})}renderSkills();var resume=new profile({width:document.getElementById("experience").offsetWidth,height:700,wrapperSelector:"#experience",dataUrl:"./data/data.json",getItemFillCollor:function(t){return"#"+function t(e){return(e+=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"][Math.floor(16*Math.random())])&&6==e.length?e:t(e)}("")}});$(".portfolio-item").hover(function(){$(this).addClass("animated "+$(this).data("action"))}),$(".portfolio-item").bind("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animated "+$(this).data("action"))}),$(document).ready(function(){$(".projects").slick({accessibility:!0,infinite:!1,arrows:!0,appendArrows:$(".arr"),slidesToShow:2,prevArrow:'<a href="javascript:void(0)" class="slick-prev">Previous</a>',nextArrow:'<a href="javascript:void(0)" class="slick-next">Next</a>',slidesToScroll:2,speed:400})});